"use strict";const selector=t=>document.querySelector(t);function removeComments(t){return t.replace(/\{\{--.*?--\}\}/gs,"")}function injectScriptSections(t){["js","scripts","script","javascript"].forEach(e=>{if(t[e]){let r=document.createElement("div");r.innerHTML=t[e];let n=r.querySelectorAll("script");n.forEach(t=>{let e=document.createElement("script");e.type="text/javascript",t.src?e.src=t.src:e.textContent=t.textContent,document.body.appendChild(e)})}})}function extractSections(t){let e=/@section\(['"](.+?)['"]\)([\s\S]*?)@endsection/g,r={},n;for(;null!==(n=e.exec(t));){let o=n[1],a=n[2].trim();r[o]=a}return r}function applyLayout(t,e){return(console.log("Applying layout with sections:",e),t)?t.replace(/@yield\(['"](.+?)['"](?:,\s*['"](.+?)['"])?\)/g,(t,r,n)=>e[r]||n||""):(console.error("No layout provided."),"")}const getUrlParams=()=>{let t=new URLSearchParams(window.location.search);return{page:t.get("page")||"index"}},router={currentPage:getUrlParams().page,setPage:function(t){t?this.currentPage=t:this.currentPage="index"},getPage:function(){return this.currentPage},getUrlParams:function(){return getUrlParams()},getUrlParam:function(t){let e=getUrlParams();return e[t]||null},getUrl:function(){let t=getUrlParams();return`?page=${t.page}`},getFullUrl:function(){return window.location.origin+this.getUrl()},getFullUrlWithParam:function(t,e){let r=getUrlParams();return r[t]=e,`${window.location.origin}?${new URLSearchParams(r).toString()}`},getFullUrlWithoutParam:function(t){let e=getUrlParams();return e.delete(t),`${window.location.origin}?${new URLSearchParams(e).toString()}`},getFullUrlWithParams:function(t){let e=getUrlParams();return Object.keys(t).forEach(r=>{e[r]=t[r]}),`${window.location.origin}?${new URLSearchParams(e).toString()}`},getFullUrlWithoutParams:function(t){let e=getUrlParams();return t.forEach(t=>{e.delete(t)}),`${window.location.origin}?${new URLSearchParams(e).toString()}`},getCurrentUrl:function(){return window.location.href},getCurrentPath:function(){return window.location.pathname},getCurrentHash:function(){return window.location.hash},getCurrentSearch:function(){return window.location.search},getCurrentOrigin:function(){return window.location.origin},getCurrentProtocol:function(){return window.location.protocol},getCurrentHost:function(){return window.location.host},getCurrentPort:function(){return window.location.port},getCurrentHostname:function(){return window.location.hostname},getCurrentHref:function(){return window.location.href},getCurrentUrlParams:function(){return getUrlParams()},getCurrentUrlParam:function(t){let e=getUrlParams();return e[t]||null},getCurrentUrlWithParam:function(t,e){let r=getUrlParams();return r[t]=e,`${window.location.origin}?${new URLSearchParams(r).toString()}`},getCurrentUrlWithoutParam:function(t){let e=getUrlParams();return e.delete(t),`${window.location.origin}?${new URLSearchParams(e).toString()}`},getCurrentUrlWithParams:function(t){let e=getUrlParams();return Object.keys(t).forEach(r=>{e[r]=t[r]}),`${window.location.origin}?${new URLSearchParams(e).toString()}`},getCurrentUrlWithoutParams:function(t){let e=getUrlParams();return t.forEach(t=>{e.delete(t)}),`${window.location.origin}?${new URLSearchParams(e).toString()}`},navigateTo:function(t){this.setPage(t),window.history.pushState({},"",this.getUrl()),window.dispatchEvent(new Event("popstate"))},reload:function(){window.location.reload()},back:function(){window.history.back()},forward:function(){window.history.forward()},replaceState:function(t,e,r){window.history.replaceState(t,e,r)},pushState:function(t,e,r){window.history.pushState(t,e,r)},onPopState:function(t){window.addEventListener("popstate",t)},offPopState:function(t){window.removeEventListener("popstate",t)},onHashChange:function(t){window.addEventListener("hashchange",t)},offHashChange:function(t){window.removeEventListener("hashchange",t)},onUrlChange:function(t){window.addEventListener("popstate",t),window.addEventListener("hashchange",t)},offUrlChange:function(t){window.removeEventListener("popstate",t),window.removeEventListener("hashchange",t)},getCurrentPage:function(){return this.getPage()},setCurrentPage:function(t){this.setPage(t),window.history.pushState({},"",this.getUrl()),window.dispatchEvent(new Event("popstate"))}},edge={render:async function(t,e={method:"GET",headers:{"Content-Type":"text/html"}}){let r=t.replace(/\./g,"/"),n=await this.fetchContent(`app/${r}.edge`,e);return n},fetchContent:async function(t,e={}){try{let r=await fetch(t,e);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.text()}catch(n){throw console.error("Fetch error:",n),n}}},Route={get:function(t,e){e.then(async t=>{let e=t.match(/@extends\(['"](.+?)['"]\)/),r=e?e[1].replace(/\./g,"/"):null,n=extractSections(t),o=t;if(r){let a=await edge.render(r);o=applyLayout(a,n)}selector("#app").innerHTML=removeComments(o),injectScriptSections(n)}).catch(e=>{console.error(`Error rendering view: ${t}`,e)})}};